// FROM PROMPT TO RESULT - Telegram Mini App
// –í–µ—Ä—Å–∏—è 1.0

console.log("APP.JS –ó–ê–ì–†–£–ñ–ï–ù!");

const CONFIG = {
    appName: "FROM PROMPT TO RESULT",
    version: "1.0",
    telegramBot: "@toresfrpro",
    supportLink: "https://t.me/toresfrpro",
    
    products: [
        {
            id: "school_pack_v1",
            name: "üéì FROM PROMPT TO RESULT: –®–ö–û–õ–ê",
            tagline: "26 –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —É—á–µ–±—ã –≤ —à–∫–æ–ª–µ",
            description: "–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–∑ 26 –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö —à–∫–æ–ª—å–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤. –†—É—Å—Å–∫–∏–π —è–∑—ã–∫, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –∏—Å—Ç–æ—Ä–∏—è, –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞ –∏ –¥—Ä—É–≥–∏–µ. –í–µ—Ä—Å–∏—è 1.0",
            price: 349,
            features: [
                "26 –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤",
                "–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —à–∫–æ–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã",
                "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—á–∏–Ω–µ–Ω–∏–π –∏ —ç—Å—Å–µ",
                "–ê–Ω–∞–ª–∏–∑ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–π",
                "–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º",
                "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —É—Å—Ç–Ω—ã–º –æ—Ç–≤–µ—Ç–∞–º",
                "–ò–¥–µ–∏ –¥–ª—è —à–∫–æ–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤"
            ],
            image: "",
            demoPrompt: "–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–µ –∏ —Ç–∞–ª–∞–Ω—Ç–ª–∏–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä. –ú–Ω–µ –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–æ—á–∏–Ω–µ–Ω–∏–µ –Ω–∞ —Ç–µ–º—É \"{–¢–ï–ú–ê}\" –¥–ª—è {–ö–õ–ê–°–°} –∫–ª–∞—Å—Å–∞. –û—Å–Ω–æ–≤–Ω–∞—è –º—ã—Å–ª—å: {–û–°–ù–û–í–ù–ê–Ø –ú–´–°–õ–¨}. –ü—Ä–µ–¥–ª–æ–∂–∏ —á–µ—Ç–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–≤–≤–µ–¥–µ–Ω–∏–µ, –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –≤—ã–≤–æ–¥), 3 —Å–∏–ª—å–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏–∑ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è \"{–ù–ê–ó–í–ê–ù–ò–ï –ü–†–û–ò–ó–í–ï–î–ï–ù–ò–Ø}\" –∏ –∫–ª–∏—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã –¥–ª—è —Å–≤—è–∑–∫–∏ —á–∞—Å—Ç–µ–π. –û–±—ä—ë–º: {–ö–û–õ–ò–ß–ï–°–¢–í–û} —Å–ª–æ–≤.",
            includes: "HTML —Ñ–∞–π–ª —Å 26 –ø—Ä–æ–º–ø—Ç–∞–º–∏",
            version: "1.0"
        },
        {
            id: "student_pack_v1", 
            name: "üéì FROM PROMPT TO RESULT: –£–ù–ò–í–ï–†–°–ò–¢–ï–¢",
            tagline: "30 –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤",
            description: "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤. –ö—É—Ä—Å–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã, –¥–∏–ø–ª–æ–º—ã, –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ, –Ω–∞—É—á–Ω—ã–µ —Å—Ç–∞—Ç—å–∏. –í–µ—Ä—Å–∏—è 1.0",
            price: 349,
            features: [
                "30 –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –≤—É–∑–∞",
                "–ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤—ã—Ö —Ä–∞–±–æ—Ç",
                "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏–ø–ª–æ–º–æ–≤",
                "–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –Ω–∞—É—á–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π",
                "–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã",
                "–ê–Ω–∞–ª–∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π",
                "–ë–∏–±–ª–∏–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Å–ø–∏—Å–∫–∏"
            ],
            image: "",
            demoPrompt: "–¢—ã ‚Äî –Ω–∞—É—á–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —Å 10-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º. –ü–æ–º–æ–≥–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∫—É—Ä—Å–æ–≤—É—é —Ä–∞–±–æ—Ç—É –ø–æ —Ç–µ–º–µ \"{–¢–ï–ú–ê}\". –ù—É–∂–Ω–æ: 1) –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ–º—ã, 2) –°—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–ª—å –∏ –∑–∞–¥–∞—á–∏, 3) –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–ª–∞–Ω –∏–∑ 3 –≥–ª–∞–≤ —Å –ø–æ–¥–ø—É–Ω–∫—Ç–∞–º–∏, 4) –î–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º (–Ω–µ —Å—Ç–∞—Ä—à–µ 5 –ª–µ—Ç). –û–±—ä—ë–º: 25-30 —Å—Ç—Ä–∞–Ω–∏—Ü.",
            includes: "HTML —Ñ–∞–π–ª —Å 30 –ø—Ä–æ–º–ø—Ç–∞–º–∏",
            version: "1.0"
        },
        {
            id: "presentation_pack_v1",
            name: "üìä FROM PROMPT TO RESULT: –ü–†–ï–ó–ï–ù–¢–ê–¶–ò–ò",
            tagline: "20 –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π",
            description: "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π. –°—Ç—Ä—É–∫—Ç—É—Ä–∞, –¥–∏–∑–∞–π–Ω, –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ, Canva/PPT. –í–µ—Ä—Å–∏—è 1.0",
            price: 449,
            features: [
                "20 –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π",
                "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª–∞–π–¥–æ–≤",
                "–î–∏–∑–∞–π–Ω-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏",
                "–¢–µ–∫—Å—Ç—ã –¥–ª—è –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π",
                "–†–∞–±–æ—Ç–∞ —Å Canva –∏ PowerPoint",
                "–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è",
                "–ü–∏—Ç—á-–¥–µ–∫–∏ –∏ –∑–∞—â–∏—Ç–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤"
            ],
            image: "",
            demoPrompt: "–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è–º –∏ –ø—É–±–ª–∏—á–Ω—ã–º –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è–º. –ü–æ–º–æ–≥–∏ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é –Ω–∞ —Ç–µ–º—É \"{–¢–ï–ú–ê}\". –ù—É–∂–Ω–æ: 1) –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é, 2) –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ 10 —Å–ª–∞–π–¥–æ–≤, 3) –î–∞—Ç—å —Å–æ–≤–µ—Ç—ã –ø–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–º—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é (—Ü–≤–µ—Ç–∞, —à—Ä–∏—Ñ—Ç—ã, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è), 4) –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ–∫—Å—Ç—ã –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–∞–π–¥–æ–≤. –î–ª—è –∑–∞—â–∏—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ.",
            includes: "HTML —Ñ–∞–π–ª —Å 20 –ø—Ä–æ–º–ø—Ç–∞–º–∏",
            version: "1.0"
        }
    ],
    
    paymentMethods: [
        { id: "yoomoney", name: "–ÆMoney / –°–ë–ü", icon: "üí≥" },
        { id: "crypto", name: "–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞ (USDT)", icon: "‚Çø" },
        { id: "bank_card", name: "–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞", icon: "üíé" }
    ]
};

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
let tg = null;
let user = null;
let cart = [];
let isInitialized = false;
let currentPreviewProduct = null;

// ==================== –°–ò–°–¢–ï–ú–ê –ü–û–ö–£–ü–û–ö ====================

// –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
const PURCHASE_STORAGE_KEY = 'fptr_purchased_v1';

// –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫—É–ø–ª–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
function loadPurchased() {
    const saved = localStorage.getItem(PURCHASE_STORAGE_KEY);
    if (saved) {
        try {
            return JSON.parse(saved);
        } catch (e) {
            return [];
        }
    }
    return [];
}

// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫—É–ø–ª–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
function savePurchased(purchased) {
    localStorage.setItem(PURCHASE_STORAGE_KEY, JSON.stringify(purchased));
}

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫—É–ø–ª–µ–Ω –ª–∏ —Ç–æ–≤–∞—Ä
function isProductPurchased(productId) {
    const purchased = loadPurchased();
    return purchased.includes(productId);
}

// –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫—É–ø–ª–µ–Ω–Ω—ã–µ
function markAsPurchased(productId) {
    const purchased = loadPurchased();
    if (!purchased.includes(productId)) {
        purchased.push(productId);
        savePurchased(purchased);
        return true;
    }
    return false;
}

// –ü–æ–ª—É—á–∏—Ç—å –∫—É–ø–ª–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
function getPurchasedProducts() {
    const purchasedIds = loadPurchased();
    return CONFIG.products.filter(product => 
        purchasedIds.includes(product.id)
    );
}

// ==================== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================

// –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
function loadCart() {
    const saved = localStorage.getItem('fptr_cart');
    if (saved) {
        try {
            cart = JSON.parse(saved);
        } catch (e) {
            cart = [];
        }
    }
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
function saveCart() {
    localStorage.setItem('fptr_cart', JSON.stringify(cart));
    updateMainButton();
    updateCartBadge();
}

// –û–±–Ω–æ–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã
function updateCartBadge() {
    const badge = document.getElementById('cartCountBadge');
    const iconBadge = document.getElementById('cartIconBadge');
    const cartButton = document.querySelector('.cart-button');
    
    if (iconBadge) {
        iconBadge.textContent = cart.length;
        iconBadge.style.display = cart.length > 0 ? 'flex' : 'none';
    }
    
    if (badge) {
        badge.textContent = cart.length;
    }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ Telegram
function updateMainButton() {
    if (!tg) return;
    
    if (cart.length > 0) {
        const total = cart.reduce((sum, item) => sum + item.price, 0);
        tg.MainButton.setText(`üõí –ö–æ—Ä–∑–∏–Ω–∞ (${cart.length}) - ${total} ‚ÇΩ`);
        tg.MainButton.onClick = showCartSection;
        tg.MainButton.show();
    } else {
        tg.MainButton.hide();
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram
function initTelegramApp() {
    if (typeof Telegram !== 'undefined') {
        tg = Telegram.WebApp;
        tg.expand();
        user = tg.initDataUnsafe?.user || { id: Date.now(), first_name: '–ü–æ–∫—É–ø–∞—Ç–µ–ª—å' };
    } else {
        user = { id: 0, first_name: 'Developer' };
    }
    loadCart();
    isInitialized = true;
}

// ==================== –†–ï–ù–î–ï–† –¢–û–í–ê–†–û–í ====================

function renderProducts() {
    const container = document.getElementById('productsContainer');
    if (!container) {
        console.error("Container #productsContainer not found!");
        return;
    }
    
    console.log("–†–µ–Ω–¥–µ—Ä—é —Ç–æ–≤–∞—Ä—ã...", CONFIG.products.length);
    
    container.innerHTML = CONFIG.products.map(product => {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫—É–ø–ª–µ–Ω –ª–∏ —Ç–æ–≤–∞—Ä
        const isPurchased = isProductPurchased(product.id);
        
        return `
        <div class="product-card">
            <div class="product-badge ${isPurchased ? 'purchased' : ''}" 
                 style="${isPurchased ? 'background: #00a000; color: white;' : ''}">
                ${isPurchased ? '‚úÖ' : `${product.price} ‚ÇΩ`}
            </div>
            <div class="product-name">${product.name}</div>
            <div class="product-tagline" style="color:#666; font-size:12px; margin-bottom:10px;">
                ${product.tagline}
            </div>
            <div class="product-description">${product.description}</div>
            
            <ul class="product-features">
                ${product.features.map(f => `<li>${f}</li>`).join('')}
            </ul>
            
            <div style="margin: 15px 0; font-size: 11px; color: #999;">
                –í–µ—Ä—Å–∏—è: ${product.version} ‚Ä¢ –í–∫–ª—é—á–∞–µ—Ç: ${product.includes}
                ${isPurchased ? '<br>‚úÖ <strong>–£–∂–µ –∫—É–ø–ª–µ–Ω–æ!</strong>' : ''}
            </div>
            
            ${isPurchased ? `
                <button class="store-btn purchased-btn" style="background: #00a000; color: white;" disabled>
                    ‚úÖ –ö–£–ü–õ–ï–ù–û
                </button>
                <button onclick="openPurchasedFile('${product.id}')" class="store-btn secondary">
                    üìÅ –û–¢–ö–†–´–¢–¨ –§–ê–ô–õ
                </button>
            ` : `
                <button onclick="addToCart('${product.id}')" class="store-btn">
                    üõí –î–û–ë–ê–í–ò–¢–¨ –í –ö–û–†–ó–ò–ù–£
                </button>
                <button onclick="showDemo('${product.id}')" class="store-btn secondary">
                    üëÅ –ü–†–ï–î–ü–†–û–°–ú–û–¢–† –ü–†–û–ú–ü–¢–ê
                </button>
            `}
        </div>
        `;
    }).join('');
    
    console.log("–¢–æ–≤–∞—Ä—ã –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω—ã!");
}

// ==================== –ö–û–†–ó–ò–ù–ê ====================

function showCartSection() {
    const modal = document.getElementById('cartModal');
    if (modal) {
        modal.style.display = 'flex';
        renderCart();
        document.body.style.overflow = 'hidden';
    }
}

function showProductsSection() {
    const modal = document.getElementById('cartModal');
    if (modal) {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
    }
}

function renderCart() {
    const container = document.getElementById('cartItemsModal');
    const totalElement = document.getElementById('totalPriceModal');
    
    if (!container) {
        console.error("–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ—Ä–∑–∏–Ω—ã –Ω–µ –Ω–∞–π–¥–µ–Ω!");
        return;
    }
    
    if (cart.length === 0) {
        container.innerHTML = `
            <div style="text-align: center; padding: 40px 20px; color: #666;">
                <div style="font-size: 48px; margin-bottom: 20px;">üõí</div>
                <h3 style="margin-bottom: 10px;">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h3>
                <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</p>
            </div>
        `;
        if (totalElement) totalElement.textContent = '0 ‚ÇΩ';
        return;
    }
    
    const total = cart.reduce((sum, item) => sum + item.price, 0);
    
    container.innerHTML = cart.map((item, index) => {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫—É–ø–ª–µ–Ω –ª–∏ —É–∂–µ —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä
        const isAlreadyPurchased = isProductPurchased(item.id);
        
        return `
        <div class="cart-item-modal" style="${isAlreadyPurchased ? 'background: #ffe6e6;' : ''}">
            <div class="cart-item-info-modal">
                <div class="cart-item-name-modal">${item.name}</div>
                <div class="cart-item-desc-modal">${item.tagline}</div>
                ${isAlreadyPurchased ? 
                    '<div style="color: #ff3333; font-size: 11px; margin-top: 5px;">‚ö†Ô∏è –£–∂–µ –∫—É–ø–ª–µ–Ω–æ!</div>' : 
                    ''}
            </div>
            <div style="text-align: right;">
                <div class="cart-item-price-modal">${item.price} ‚ÇΩ</div>
                <button onclick="removeFromCart(${index})" class="cart-item-remove-modal">
                    ‚ùå –£–¥–∞–ª–∏—Ç—å
                </button>
            </div>
        </div>
        `;
    }).join('');
    
    if (totalElement) totalElement.textContent = `${total} ‚ÇΩ`;
}

function addToCart(productId) {
    const product = CONFIG.products.find(p => p.id === productId);
    if (!product) return;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫—É–ø–ª–µ–Ω –ª–∏ —É–∂–µ —Ç–æ–≤–∞—Ä
    if (isProductPurchased(productId)) {
        showNotification('‚ùå –≠—Ç–æ—Ç —Ç–æ–≤–∞—Ä —É–∂–µ –∫—É–ø–ª–µ–Ω!');
        return;
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –≤ –∫–æ—Ä–∑–∏–Ω–µ
    const alreadyInCart = cart.find(item => item.id === productId);
    if (alreadyInCart) {
        showNotification('‚ö†Ô∏è –¢–æ–≤–∞—Ä —É–∂–µ –≤ –∫–æ—Ä–∑–∏–Ω–µ!');
        return;
    }
    
    cart.push({
        ...product,
        cartId: Date.now() + Math.random()
    });
    
    saveCart();
    showNotification(`‚úÖ ${product.name} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!`);
}

function removeFromCart(index) {
    if (index >= 0 && index < cart.length) {
        cart.splice(index, 1);
        saveCart();
        renderCart();
    }
}

function clearCart() {
    cart = [];
    localStorage.removeItem('fptr_cart');
    showNotification('–ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞!');
    showProductsSection();
    updateCartBadge();
}

// ==================== –ü–†–ï–î–ü–†–û–°–ú–û–¢–† ====================

function showDemo(productId) {
    const product = CONFIG.products.find(p => p.id === productId);
    if (!product) return;
    
    currentPreviewProduct = product;
    
    document.getElementById('previewTitle').textContent = `–ü–†–ï–î–ü–†–û–°–ú–û–¢–†: ${product.name}`;
    document.getElementById('previewProductName').textContent = product.name;
    document.getElementById('previewPrice').textContent = `${product.price} ‚ÇΩ`;
    document.getElementById('previewPromptText').value = product.demoPrompt;
    
    const featuresList = document.getElementById('previewFeatures');
    if (featuresList) {
        featuresList.innerHTML = product.features.map(f => `<li>${f}</li>`).join('');
    }
    
    const modal = document.getElementById('previewModal');
    if (modal) {
        modal.style.display = 'flex';
    }
    
    document.body.style.overflow = 'hidden';
}

function closePreview() {
    const modal = document.getElementById('previewModal');
    if (modal) {
        modal.style.display = 'none';
    }
    document.body.style.overflow = 'auto';
    currentPreviewProduct = null;
}

function copyPreviewPrompt() {
    const textarea = document.getElementById('previewPromptText');
    if (!textarea) return;
    
    textarea.select();
    try {
        navigator.clipboard.writeText(textarea.value);
        showNotification('–ü—Ä–æ–º–ø—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
    } catch (err) {
        document.execCommand('copy');
        showNotification('–ü—Ä–æ–º–ø—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
    }
}

function addToCartFromPreview() {
    if (!currentPreviewProduct) return;
    addToCart(currentPreviewProduct.id);
    closePreview();
}

// ==================== –ó–ê–ö–ê–ó ====================

function checkout() {
    if (cart.length === 0) {
        showNotification('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!');
        return;
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø—ã—Ç–∞—é—Ç—Å—è –ª–∏ –∫—É–ø–∏—Ç—å —É–∂–µ –∫—É–ø–ª–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä
    const alreadyPurchasedItems = cart.filter(item => 
        isProductPurchased(item.id)
    );
    
    if (alreadyPurchasedItems.length > 0) {
        showNotification('‚ùå –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–æ–≤–∞—Ä—ã —É–∂–µ –∫—É–ø–ª–µ–Ω—ã! –£–¥–∞–ª–∏—Ç–µ –∏—Ö –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã.');
        return;
    }
    
    const total = cart.reduce((sum, item) => sum + item.price, 0);
    const itemsList = cart.map(item => `‚Ä¢ ${item.name} - ${item.price} ‚ÇΩ`).join('\n');
    
    // –°–∏–º—É–ª—è—Ü–∏—è –æ–ø–ª–∞—Ç—ã
    const confirmation = confirm(`üí≥ –û–§–û–†–ú–õ–ï–ù–ò–ï –ó–ê–ö–ê–ó–ê\n\n–¢–æ–≤–∞—Ä–æ–≤: ${cart.length}\n–°—É–º–º–∞: ${total} ‚ÇΩ\n\n–ü–û–î–¢–í–ï–†–î–ò–¢–ï –ü–û–ö–£–ü–ö–£?`);
    
    if (!confirmation) {
        showNotification('‚ùå –ü–æ–∫—É–ø–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞');
        return;
    }
    
    showNotification('‚úÖ –û–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!');
    
    // –ü–æ–º–µ—á–∞–µ–º —Ç–æ–≤–∞—Ä—ã –∫–∞–∫ –∫—É–ø–ª–µ–Ω–Ω—ã–µ
    cart.forEach(item => {
        markAsPurchased(item.id);
    });
    
    // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
    cart = [];
    saveCart();
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª–∏
    setTimeout(() => {
        const purchasedProducts = getPurchasedProducts();
        const message = `
‚úÖ –ü–û–ö–£–ü–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê!

–í—ã –ø—Ä–∏–æ–±—Ä–µ–ª–∏:
${itemsList}

–ò—Ç–æ–≥–æ: ${total} ‚ÇΩ

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª—ã —Å –ø—Ä–æ–º–ø—Ç–∞–º–∏ –Ω–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É "–û–¢–ö–†–´–¢–¨ –§–ê–ô–õ" —Ä—è–¥–æ–º —Å –∫—É–ø–ª–µ–Ω–Ω—ã–º —Ç–æ–≤–∞—Ä–æ–º.
        `;
        
        alert(message);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
        renderProducts();
        
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
        showProductsSection();
        
    }, 500);
}

// ==================== –£–¢–ò–õ–ò–¢–´ ====================

function showNotification(message) {
    const notification = document.createElement('div');
    notification.className = 'store-notification';
    notification.textContent = message;
    document.body.appendChild(notification);
    
    setTimeout(() => {
        if (notification.parentNode) {
            notification.remove();
        }
    }, 3000);
}

// ==================== T–ï–°–¢ ===================

function resetAllData() {
    if (confirm('‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï!\n\n–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –í–°–ï –¥–∞–Ω–Ω—ã–µ?\n\n‚Ä¢ –ö–æ—Ä–∑–∏–Ω–∞ –±—É–¥–µ—Ç –æ—á–∏—â–µ–Ω–∞\n‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫ —É–¥–∞–ª–µ–Ω–∞\n\n–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!')) {
        // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
        cart = [];
        localStorage.removeItem('fptr_cart');
        
        // –û—á–∏—â–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø–æ–∫—É–ø–æ–∫
        localStorage.removeItem(PURCHASE_STORAGE_KEY);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        renderProducts();
        renderCart();
        updateCartBadge();
        
        showNotification('‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–±—Ä–æ—à–µ–Ω—ã!');
    }
}

// ==================== –û–¢–ö–†–´–¢–ò–ï –ö–£–ü–õ–ï–ù–ù–´–• –§–ê–ô–õ–û–í ====================

function openPurchasedFile(productId) {
    const product = CONFIG.products.find(p => p.id === productId);
    if (!product) {
        showNotification('–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫—É–ø–ª–µ–Ω –ª–∏ —Ç–æ–≤–∞—Ä
    if (!isProductPurchased(productId)) {
        showNotification('‚ùå –°–Ω–∞—á–∞–ª–∞ –∫—É–ø–∏—Ç–µ —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä!');
        return;
    }
    
    // –°—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
    const fileLinks = {
        'school_pack_v1': 'school-prompts.html',
        'student_pack_v1': '#', // –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø—Ä–æ–º–ø—Ç—ã
        'presentation_pack_v1': '#' // –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π
    };
    
    const fileName = fileLinks[productId];
    
    if (fileName && fileName !== '#') {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª
        fetch(fileName)
            .then(response => {
                if (response.ok) {
                    window.open(fileName, '_blank');
                    showNotification(`üìÅ –û—Ç–∫—Ä—ã–≤–∞—é: ${product.name}`);
                } else {
                    showNotification('‚ùå –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ GitHub Pages.');
                    // –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ —Å–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
                    if (productId === 'school_pack_v1') {
                        createTemporarySchoolFile();
                    }
                }
            })
            .catch(error => {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞:', error);
                showNotification('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞');
                
                // –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
                if (productId === 'school_pack_v1') {
                    createTemporarySchoolFile();
                }
            });
    } else {
        showNotification('üìù –§–∞–π–ª –µ—â–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –û–∂–∏–¥–∞–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è!');
    }
}

// ==================== –õ–ò–ß–ù–´–ô –ö–ê–ë–ò–ù–ï–¢ ====================

function showMyPurchases() {
    const purchasedProducts = getPurchasedProducts();
    
    if (purchasedProducts.length === 0) {
        showNotification('–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–∫—É–ø–æ–∫');
        return;
    }
    
    const modal = document.createElement('div');
    modal.className = 'modal-overlay';
    modal.style.display = 'flex';
    modal.innerHTML = `
        <div class="modal-container" style="max-width: 600px;">
            <div class="modal-header">
                <h3>üìÅ –ú–û–ò –ü–û–ö–£–ü–ö–ò</h3>
                <button onclick="this.parentElement.parentElement.remove()" class="modal-close-btn">‚úï</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 20px; color: #666; font-size: 14px;">
                    –í—Å–µ–≥–æ –∫—É–ø–ª–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: ${purchasedProducts.length}
                </div>
                
                <div class="purchased-items">
                    ${purchasedProducts.map(product => `
                        <div class="cart-item-modal" style="margin-bottom: 10px;">
                            <div class="cart-item-info-modal">
                                <div class="cart-item-name-modal">${product.name}</div>
                                <div class="cart-item-desc-modal">${product.tagline}</div>
                                <div style="font-size: 11px; color: #00a000; margin-top: 5px;">
                                    ‚úÖ –ö—É–ø–ª–µ–Ω–æ
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <button onclick="openPurchasedFile('${product.id}')" class="store-btn" style="padding: 8px 12px; font-size: 12px;">
                                    üìÅ –û–¢–ö–†–´–¢–¨
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="this.parentElement.parentElement.parentElement.remove()" class="store-btn secondary">
                        –ó–ê–ö–†–´–¢–¨
                    </button>
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    document.body.style.overflow = 'hidden';
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
function createTemporarySchoolFile() {
    // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π HTML —Ñ–∞–π–ª —Å –ø—Ä–æ–º–ø—Ç–∞–º–∏
    const tempHtml = `
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>FROM PROMPT TO RESULT | –®–ö–û–õ–¨–ù–´–ï –ü–†–û–ú–ü–¢–´</title>
    <style>
        body { font-family: Courier, monospace; padding: 20px; }
        h1 { color: #000; }
        .prompt { border: 2px solid #000; padding: 15px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>üéì FROM PROMPT TO RESULT: –®–ö–û–õ–¨–ù–´–ï –ü–†–û–ú–ü–¢–´</h1>
    <p>–í–µ—Ä—Å–∏—è 1.0 | 26 –ø—Ä–æ–º–ø—Ç–æ–≤</p>
    
    <div class="prompt">
        <h3>üìù –ü—Ä–æ–º–ø—Ç 1: –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Å–æ—á–∏–Ω–µ–Ω–∏—è</h3>
        <code>–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–µ –∏ —Ç–∞–ª–∞–Ω—Ç–ª–∏–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä. –ú–Ω–µ –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–æ—á–∏–Ω–µ–Ω–∏–µ –Ω–∞ —Ç–µ–º—É "{–¢–ï–ú–ê}" –¥–ª—è {–ö–õ–ê–°–°} –∫–ª–∞—Å—Å–∞...</code>
    </div>
    
    <div class="prompt">
        <h3>üìù –ü—Ä–æ–º–ø—Ç 2: –ê–Ω–∞–ª–∏–∑ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏—è</h3>
        <code>–†–∞–∑–±–µ—Ä–∏ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ {–ê–í–¢–û–†} "{–ù–ê–ó–í–ê–ù–ò–ï}" –∫–∞–∫ –¥–ª—è —É—Ä–æ–∫–∞ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –≤ {–ö–õ–ê–°–°} –∫–ª–∞—Å—Å–µ...</code>
    </div>
    
    <p style="margin-top: 30px; color: #666;">
        ‚úÖ –≠—Ç–æ –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è —Ñ–∞–π–ª–∞. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –Ω–∞ GitHub Pages –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π —Ñ–∞–π–ª —Å 26 –ø—Ä–æ–º–ø—Ç–∞–º–∏.
    </p>
</body>
</html>`;
    
    // –°–æ–∑–¥–∞–µ–º blob –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
    const blob = new Blob([tempHtml], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    window.open(url, '_blank');
    showNotification('üìÑ –û—Ç–∫—Ä—ã—Ç –¥–µ–º–æ-—Ñ–∞–π–ª –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è');
}

window.createTemporarySchoolFile = createTemporarySchoolFile;

// ==================== –ë–û–¢ ====================

// –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –≤ –±–æ—Ç–∞
function sendOrderToBot() {
    const orderId = 'order_' + Date.now();
    const total = cart.reduce((sum, item) => sum + item.price, 0);
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
    const order = {
        id: orderId,
        products: cart.map(item => item.id),
        total: total,
        timestamp: Date.now()
    };
    
    localStorage.setItem('last_order', JSON.stringify(order));
    
    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º
    const botUrl = `https://t.me/FromPromptToResultBot?start=${orderId}`;
    window.open(botUrl, '_blank');
    
    showNotification('üì± –û—Ç–∫—Ä—ã–≤–∞—é Telegram –±–æ—Ç–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã...');
    
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    setTimeout(() => {
        if (confirm('–ü–µ—Ä–µ–π—Ç–∏ –≤ –±–æ—Ç–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã?')) {
            window.location.href = botUrl;
        }
    }, 1000);
}

// –í —Ñ—É–Ω–∫—Ü–∏–∏ checkout() –≤–º–µ—Å—Ç–æ payment –≤—ã–∑—ã–≤–∞–µ–º:
function checkout() {
    if (cart.length === 0) {
        showNotification('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!');
        return;
    }
    
    sendOrderToBot();
}

// ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================

function initializeApp() {
    console.log("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...");
    document.title = `FROM PROMPT TO RESULT Store v${CONFIG.version}`;
    
    // –†–µ–Ω–¥–µ—Ä–∏–º —Ç–æ–≤–∞—Ä—ã —Å—Ä–∞–∑—É
    renderProducts();
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Telegram —á–µ—Ä–µ–∑ 100–º—Å
    setTimeout(() => {
        initTelegramApp();
        updateCartBadge();
        console.log("–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ!");
    }, 100);
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initializeApp);
} else {
    initializeApp();
}

// –≠–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å
window.renderProducts = renderProducts;
window.showMyPurchases = showMyPurchases;
window.openPurchasedFile = openPurchasedFile;
window.isProductPurchased = isProductPurchased;
window.resetAllData = resetAllData;
window.showDemo = showDemo;
window.closePreview = closePreview;
window.copyPreviewPrompt = copyPreviewPrompt;
window.addToCartFromPreview = addToCartFromPreview;
window.clearCart = clearCart;
window.showCartSection = showCartSection;
window.showProductsSection = showProductsSection;
window.addToCart = addToCart;
window.removeFromCart = removeFromCart;
window.checkout = checkout;